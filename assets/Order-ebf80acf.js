import{d as D,b as I,r as g,A as T,o as f,f as y,g as e,w as s,v as m,L as l,m as p,E as x,M as q,i as c,K as C,j as S,N as O,H as k}from"./index-6f6749ac.js";import{G as M,S as Y,a as N}from"./SelectGroupDate-04c3b3da.js";import{j as b}from"./jsonApi-71500902.js";import{f as h}from"./formApi-e583adde.js";import{S as L,g as n}from"./util.grid-e8996db9.js";import"./index-8d9b3034.js";import"./util.date-5697c534.js";class G{async getOrderList(a){return(await b("/bo/or/getOrderList",a||{})).data}async getOrder(a){return(await b("/bo/or/getOrder",a||{})).data}async setOrderList(a){return(await b("/bo/or/setOrderList",a||{})).data}async insertOrder(a){return(await h("/bo/or/insertOrder",a)).data}async updateOrder(a){return(await h("/bo/or/updateOrder",a)).data}async deleteOrder(a){return(await h("/bo/or/getOrderList",a)).data}}const w=new G,V=["onSubmit","onKeyup"],A=e("legend",null,"검색",-1),P=e("colgroup",null,[e("col",{width:"80"}),e("col",{width:"30%"}),e("col",{width:"80"}),e("col",{width:"*"})],-1),H=e("th",null,"검색조건",-1),B={colspan:"3"},$={key:0},E=e("th",null,"업체ID",-1),K={colspan:"3"},R={class:"audit"},U=e("th",null,"수정기간",-1),z={colspan:"3"},F=e("th",null,"등록일",-1),W={colspan:"3"},X=e("th",null,"수정ID",-1),j=e("th",null,"등록ID",-1),J={class:"btnWrap"},Q={class:"crud"},Z=e("span",{class:"icon"},"",-1),ee=e("span",{class:"icon"},"",-1),te=e("span",{class:"icon"},"",-1),ae=e("button",{type:"submit",class:"button3"},[e("span",{class:"icon"},"")],-1),re=e("span",{class:"icon"},'"',-1),de=[re],ie={class:"totalCount"},oe=e("div",{id:"orderGrid"},null,-1),be=D({__name:"Order",setup(v){const a=I(),r=g({keyword:"",startModDt:"",endModDt:"",regDt:"",regId:"",modId:"",cmpId:""}),i=g({orderGrid:{},required:["prodNo","ordStatCd","mbrNm","telNo","rsvDay","email","price"],totalCount:0,list:[],audit:!1}),u=()=>{w.getOrderList(r).then(o=>{i.totalCount=o.count?o.count:0,i.list=o.data,i.orderGrid.resetData(o.data,{})},o=>{console.log(o)})},_=()=>{let o=n.save(i.orderGrid,i.required);o&&w.setOrderList(o).then(t=>{location.reload()},t=>{console.log(t)})};return T(()=>{i.orderGrid=new M({el:document.getElementById("orderGrid"),columns:[{header:"주문번호",name:"ordNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!1},editor:"text"},{header:"상품번호",name:"prodNo",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"업체ID",name:"cmpId",sortable:!0,width:100,align:"left",disabled:a.userInfo.cmpId!="kaisa",editor:"text"},{header:"주문상태코드",name:"ordStatCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!1},formatter:"listItemText",editor:{type:"select",options:{listItems:a.codeList.ORD_STAT_CD}}},{header:"예약경로코드",name:"rsvPathCd",width:120,align:"left",sortable:!0,disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:a.codeList.RSV_PATH_CD}}},{header:"회원명",name:"mbrNm",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"전화번호",name:"telNo",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"예약일",name:"rsvDay",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd"}}},{header:"이메일",name:"email",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!1},editor:"text"},{header:"요금",name:"price",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!1},editor:"text"},{header:"추가요금",name:"addPrice",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"사용포인트",name:"usePnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"쿠폰번호",name:"cpnNo",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"회원ID",name:"mbrId",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"할인요금",name:"dcPrice",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"인원수",name:"psnelCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"추가인원수",name:"addPsnelCnt",sortable:!0,width:100,align:"right",disabled:!1,validation:{dataType:"number",required:!0},editor:"text"},{header:"온수추가여부",name:"wwtAddYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:a.codeList.YN_CD}}},{header:"바베큐추가여부",name:"bbqAddYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:a.codeList.YN_CD}}},{header:"픽업여부",name:"pickupYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!1,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:a.codeList.YN_CD}}},{header:"비고",name:"note",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"연동참조",name:"linkRef",sortable:!0,width:100,align:"left",disabled:!1,validation:{dataType:"string",required:!0},editor:"text"},{header:"수정ID",name:"modId",align:"left",sortable:!0,width:110,disabled:!0},{header:"수정일시",name:"modDt",align:"left",sortable:!0,width:120,disabled:!0},{header:"등록ID",name:"regId",align:"left",sortable:!0,width:110,disabled:!0},{header:"등록일시",name:"regDt",align:"left",sortable:!0,width:120,disabled:!0}],scrollX:!0,scrollY:!0,minBodyHeight:200,bodyHeight:468,columnOptions:{resizable:!0},minRowHeight:40,rowHeight:40,header:{height:40}}),i.orderGrid.on("click",o=>{o.columnName==="cd"&&console.log("click")}),u()}),(o,t)=>(f(),y(k,null,[e("form",{class:"search",onSubmit:S(u,["prevent"]),onKeyup:O(u,["enter"])},[e("fieldset",null,[A,e("table",null,[P,e("tbody",null,[e("tr",null,[H,e("td",B,[s(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>r.keyword=d)},null,512),[[m,r.keyword]])])]),l(a).userInfo.cmpId=="kaisa"?(f(),y("tr",$,[E,e("td",K,[p(L,{cmpId:r.cmpId,onSetCompany:t[1]||(t[1]=d=>{r.cmpId=d.cmpId})},null,8,["cmpId"])])])):x("",!0)]),s(e("tbody",R,[e("tr",null,[U,e("td",z,[p(Y,{name:["startModDt","endModDt"],format:"YYYY-MM-DD",date:[r.startModDt,r.endModDt],onSetStartDate:t[2]||(t[2]=d=>{r.startModDt=d.date}),onSetEndDate:t[3]||(t[3]=d=>{r.endModDt=d.date})},null,8,["date"])])]),e("tr",null,[F,e("td",W,[p(N,{name:["regDt"],format:"YYYY-MM-DD",date:[r.regDt],onSetStartDate:t[4]||(t[4]=d=>{r.regDt=d.date})},null,8,["date"])])]),e("tr",null,[X,e("td",null,[s(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=d=>r.modId=d)},null,512),[[m,r.modId]])]),j,e("td",null,[s(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=d=>r.regId=d)},null,512),[[m,r.regId]])])])],512),[[q,i.audit]])])]),e("div",J,[e("span",Q,[e("button",{type:"button",class:"button add",onClick:t[7]||(t[7]=d=>l(n).add(i.orderGrid,0))},[Z,c("추가")]),e("button",{type:"button",class:"button save",onClick:_},[ee,c("저장")]),e("button",{type:"button",class:"button del",onClick:t[8]||(t[8]=d=>l(n).del(i.orderGrid))},[te,c("삭제")])]),e("button",{type:"button",class:"audit",onClick:t[9]||(t[9]=d=>i.audit=!i.audit)},"상세조회"),ae,e("button",{type:"reset",onClick:t[10]||(t[10]=d=>l(n).reload())},de),e("div",ie,"총 "+C(i.totalCount)+"건",1)])],40,V),oe],64))}});export{be as default};
