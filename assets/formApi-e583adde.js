import{a as n}from"./index-8d9b3034.js";import{a as i,O as l}from"./index-6f6749ac.js";const d=i();let c="http://localhost:9995";const a=l(),r=n.create({timeout:2e4,baseURL:c});r.interceptors.request.use(e=>{a.start(),e.data||(e.data=new FormData);for(let t of[...e.data])(t[1]==="undefined"||t[1]==="null"||!t[1])&&e.data.delete(t[0]);return e},e=>(a.end(),console.log(e),Promise.reject()));r.interceptors.response.use(e=>{if(a.end(),e.status===200)return e;Promise.reject()},e=>{var s;a.end(),console.log(e);const t=(s=e.response)==null?void 0:s.data;return t&&t.message&&d.open({title:null,message:t.message}),Promise.reject()});const o=JSON.parse(localStorage.getItem("userInfo")||"{}"),m={method:"post",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+(o==null?void 0:o.token)},withCredentials:!1},u=(e,t)=>r({url:e,data:t,...m});export{u as f};
