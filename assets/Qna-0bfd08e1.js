import{d as S,b as $,r as _,A as k,o as h,f as D,g as t,j as L,L as N,m as c,E as q,w as u,v as m,M as T,i as Y,K as C,N as M,D as E,H as F}from"./index-6f6749ac.js";import{G as V,S as U,a as A}from"./SelectGroupDate-04c3b3da.js";import{j as w}from"./jsonApi-71500902.js";import{f as y}from"./formApi-e583adde.js";import{S as Q,g as v}from"./util.grid-e8996db9.js";import{F as G}from"./FtpService-c7f28024.js";import{_ as R}from"./CommonCode.vue_vue_type_script_setup_true_lang-ab59297e.js";import{F as B}from"./FileListUploader-afa9b1dc.js";import{d as f}from"./util.date-5697c534.js";import"./index-8d9b3034.js";class K{async getQnaList(o){return(await w("/bo/cs/getQnaList",o||{})).data}async getQna(o){return(await w("/bo/cs/getQna",o||{})).data}async setQnaList(o){return(await w("/bo/cs/setQnaList",o||{})).data}async insertQna(o){return(await y("/bo/cs/insertQna",o)).data}async updateQna(o){return(await y("/bo/cs/updateQna",o)).data}async deleteQna(o){return(await y("/bo/cs/getQnaList",o)).data}}const g=new K,H={id:"QnaDetail",class:"popup"},O={class:"popupWrap"},W=t("h3",null,"QNA 등록/수정",-1),j=t("span",{class:"icon"},"",-1),z=[j],X={class:"popT"},J={key:0},P=t("th",{class:"th required"},"업체",-1),Z={class:"td"},tt=t("th",{class:"th"},"회원ID",-1),et={class:"td"},at=t("th",{class:"th"},"회원 명",-1),dt={class:"td"},nt=t("th",{class:"th"},"회원 전화번호",-1),ot={class:"td"},st=t("th",{class:"th"},"회원 이메일",-1),lt={class:"td"},it=t("th",{class:"th"},"비밀번호",-1),rt={class:"td"},ut=t("th",{class:"th"},"제목",-1),mt={class:"td"},pt=t("tr",null,[t("td",{colspan:"2",class:"td"},[t("div",{id:"qnaEditor"})])],-1),ct=t("th",{class:"th required"},"문자여부",-1),ht={class:"td"},bt=t("th",{class:"th"},"파일번호",-1),ft={class:"td"},gt={class:"btnWrap"},_t=S({__name:"QnaDetail",props:{data:{type:Object,required:!0}},emits:["set-close"],setup(I,{emit:o}){const e=I,l=$();e.data.strtDt||(e.data.strtDt=f.format(new Date,f.DATE_FORMAT)),e.data.endDt||(e.data.endDt=f.format(new Date,f.DATE_FORMAT)),e.data.useYn||(e.data.useYn="Y");const p=_({addFileList:[]}),b=_({editor:{},editorOption:{}}),r=()=>{e.data.qnaNo?g.getQna({qnaNo:e.data.qnaNo}).then(d=>{e.data.qnaNo=d.data.qnaNo,e.data.cnts=d.data.cnts,e.data.fileList=d.data.fileList,n()},d=>{console.log(d)}):n()},n=()=>{b.editor=v.createEditor({name:"#qnaEditor",cnts:e.data.cnts})},i=()=>{let d=v.makeFileData({name:"qna",props:e,data:p});d.addCount>0||d.delCount>0?G.uploadList(d.form).then(a=>{if(a.success)e.data.fileNo=a.data.fileNo,x();else return!1},a=>(console.log(a),!1)):x()},x=()=>{let d=new FormData;d.append("qnaNo",e.data.qnaNo),d.append("cmpId",e.data.cmpId+""),d.append("mbrId",e.data.mbrId+""),d.append("mbrNm",e.data.mbrNm+""),d.append("mbrTelNo",e.data.mbrTelNo+""),d.append("mbrEmail",e.data.mbrEmail+""),d.append("pwd",e.data.pwd+""),d.append("tit",e.data.tit+""),d.append("cnts",b.editor.getMarkdown()),d.append("chrYn",e.data.chrYn+""),d.append("fileNo",e.data.fileNo),d.append("linkRef",e.data.linkRef+""),d.append("modId",e.data.modId+""),d.append("modDt",e.data.modDt+""),d.append("regId",e.data.regId+""),d.append("regDt",e.data.regDt+""),(e.data.mode==="insert"?g.insertQna:g.updateQna)(d).then(a=>{a.success?location.reload():console.log(a)},a=>{console.log(a)})};return k(()=>{r()}),(d,a)=>(h(),D("div",H,[t("div",O,[W,t("div",{class:"close",onClick:a[0]||(a[0]=s=>o("set-close"))},z),t("form",{onSubmit:a[12]||(a[12]=L(()=>{},["prevent"]))},[t("table",X,[N(l).userInfo.cmpId=="kaisa"?(h(),D("tr",J,[P,t("td",Z,[c(Q,{cmpId:e.data.cmpId,required:!0,onSetCompany:a[1]||(a[1]=s=>{e.data.cmpId=s.cmpId})},null,8,["cmpId"])])])):q("",!0),t("tr",null,[tt,t("td",et,[u(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=s=>e.data.mbrId=s),maxlength:"100"},null,512),[[m,e.data.mbrId]])])]),t("tr",null,[at,t("td",dt,[u(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=s=>e.data.mbrNm=s),maxlength:"100"},null,512),[[m,e.data.mbrNm]])])]),t("tr",null,[nt,t("td",ot,[u(t("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=s=>e.data.mbrTelNo=s),maxlength:"60"},null,512),[[m,e.data.mbrTelNo]])])]),t("tr",null,[st,t("td",lt,[u(t("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>e.data.mbrEmail=s),maxlength:"100"},null,512),[[m,e.data.mbrEmail]])])]),t("tr",null,[it,t("td",rt,[u(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=s=>e.data.pwd=s),maxlength:"200"},null,512),[[m,e.data.pwd]])])]),t("tr",null,[ut,t("td",mt,[u(t("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=s=>e.data.tit=s),maxlength:"200"},null,512),[[m,e.data.tit]])])]),pt,t("tr",null,[ct,t("td",ht,[c(R,{cd:"YN_CD",model:e.data.chrYn,onSetData:a[8]||(a[8]=s=>{e.data.chrYn=s})},null,8,["model"])])]),t("tr",null,[bt,t("td",ft,[c(B,{name:"Qna",fileList:e.data.fileList,addFileList:p.addFileList,onSetFileList:a[9]||(a[9]=s=>{e.data.fileList=s}),onSetAddFileList:a[10]||(a[10]=s=>{p.addFileList=s})},null,8,["fileList","addFileList"])])])]),t("div",gt,[t("button",{type:"submit",onClick:i},"저장"),t("button",{type:"button",class:"gray",onClick:a[11]||(a[11]=s=>o("set-close"))},"취소")])],32)])]))}}),Dt=["onSubmit","onKeyup"],It=t("legend",null,"검색",-1),wt=t("colgroup",null,[t("col",{width:"80"}),t("col",{width:"30%"}),t("col",{width:"80"}),t("col",{width:"*"})],-1),yt=t("th",null,"검색조건",-1),Nt={colspan:"3"},qt={key:0},vt=t("th",null,"업체ID",-1),xt={colspan:"3"},St={class:"audit"},$t=t("th",null,"수정기간",-1),kt={colspan:"3"},Lt=t("th",null,"등록일",-1),Qt={colspan:"3"},Tt=t("th",null,"수정ID",-1),Yt=t("th",null,"등록ID",-1),Ct={class:"btnWrap"},Mt=t("span",{class:"icon"},"",-1),Et=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1),Ft=t("span",{class:"icon"},'"',-1),Vt=[Ft],Ut={class:"totalCount"},At=t("div",{id:"qnaGrid"},null,-1),Jt=S({__name:"Qna",setup(I){const o=$(),e=_({keyword:"",startModDt:"",endModDt:"",regDt:"",regId:"",modId:"",cmpId:""}),l=_({qnaGrid:{},required:["cnts","chrYn"],totalCount:0,list:[],audit:!1,detailShow:!1,detail:{qnaNo:0,cmpId:"",mbrId:"",mbrNm:"",mbrTelNo:"",mbrEmail:"",pwd:"",tit:"",cnts:"",chrYn:"Y",fileNo:0,linkRef:"",modId:"",modDt:"",regId:"",regDt:"",mode:""}}),p=()=>{g.getQnaList(e).then(r=>{l.totalCount=r.count?r.count:0,l.list=r.data,l.qnaGrid.resetData(r.data,{})},r=>{console.log(r)})},b=()=>{l.detail={qnaNo:0,cmpId:"",mbrId:"",mbrNm:"",mbrTelNo:"",mbrEmail:"",pwd:"",tit:"",cnts:"",chrYn:"",fileNo:0,linkRef:"",modId:"",modDt:"",regId:"",regDt:"",mode:"insert"},l.detailShow=!0};return k(()=>{l.qnaGrid=new V({el:document.getElementById("qnaGrid"),columns:[{header:"QNA 번호",name:"qnaNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!1},editor:"text"},{header:"업체ID",name:"cmpId",sortable:!0,width:100,align:"left",disabled:!0,hidden:o.userInfo.cmpId!="kaisa",editor:"text"},{header:"회원ID",name:"mbrId",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"회원 명",name:"mbrNm",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"회원 전화번호",name:"mbrTelNo",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"회원 이메일",name:"mbrEmail",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"비밀번호",name:"pwd",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"제목",name:"tit",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"문자여부",name:"chrYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!0,validation:{dataType:"string",required:!1},formatter:"listItemText",editor:{type:"select",options:{listItems:o.codeList.YN_CD}}},{header:"파일번호",name:"fileNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!0},editor:"text"},{header:"연동참조",name:"linkRef",align:"left",sortable:!0,width:110,disabled:!0,hidden:o.userInfo.cmpId!="kaisa"},{header:"수정 ID",name:"modId",align:"left",sortable:!0,width:110,disabled:!0},{header:"수정 일시",name:"modDt",align:"left",sortable:!0,width:120,disabled:!0},{header:"등록 ID",name:"regId",align:"left",sortable:!0,width:110,disabled:!0},{header:"등록 일시",name:"regDt",align:"left",sortable:!0,width:120,disabled:!0}],scrollX:!0,scrollY:!0,minBodyHeight:200,bodyHeight:468,columnOptions:{resizable:!0},minRowHeight:40,rowHeight:40,header:{height:40}}),l.qnaGrid.on("dblclick",r=>{r.columnName&&l.list[r.rowKey]&&(l.detail=l.list[r.rowKey],l.detailShow=!0)}),p()}),(r,n)=>(h(),D(F,null,[t("form",{class:"search",onSubmit:L(p,["prevent"]),onKeyup:M(p,["enter"])},[t("fieldset",null,[It,t("table",null,[wt,t("tbody",null,[t("tr",null,[yt,t("td",Nt,[u(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=i=>e.keyword=i)},null,512),[[m,e.keyword]])])]),N(o).userInfo.cmpId=="kaisa"?(h(),D("tr",qt,[vt,t("td",xt,[c(Q,{cmpId:e.cmpId,onSetCompany:n[1]||(n[1]=i=>{e.cmpId=i.cmpId})},null,8,["cmpId"])])])):q("",!0)]),u(t("tbody",St,[t("tr",null,[$t,t("td",kt,[c(U,{name:["startModDt","endModDt"],format:"YYYY-MM-DD",date:[e.startModDt,e.endModDt],onSetStartDate:n[2]||(n[2]=i=>{e.startModDt=i.date}),onSetEndDate:n[3]||(n[3]=i=>{e.endModDt=i.date})},null,8,["date"])])]),t("tr",null,[Lt,t("td",Qt,[c(A,{name:["regDt"],format:"YYYY-MM-DD",date:[e.regDt],onSetStartDate:n[4]||(n[4]=i=>{e.regDt=i.date})},null,8,["date"])])]),t("tr",null,[Tt,t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=i=>e.modId=i)},null,512),[[m,e.modId]])]),Yt,t("td",null,[u(t("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=i=>e.regId=i)},null,512),[[m,e.regId]])])])],512),[[T,l.audit]])])]),t("div",Ct,[t("span",{class:"crud"},[t("button",{type:"button",class:"button add",onClick:b},[Mt,Y("등록")])]),t("button",{type:"button",class:"audit",onClick:n[7]||(n[7]=i=>l.audit=!l.audit)},"상세조회"),Et,t("button",{type:"reset",onClick:n[8]||(n[8]=i=>N(v).reload())},Vt),t("div",Ut,"총 "+C(l.totalCount)+"건",1)])],40,Dt),At,l.detailShow?(h(),E(_t,{key:0,data:l.detail,onSetClose:n[9]||(n[9]=i=>{l.detailShow=!1})},null,8,["data"])):q("",!0)],64))}});export{Jt as default};
