import{d as $,b as M,r as b,A as N,o as f,f as y,g as t,j as L,L as h,m as u,E as F,w as c,v as D,i as Y,M as T,K as A,N as x,D as E,H as R}from"./index-6f6749ac.js";import{a as S,G as V,S as G}from"./SelectGroupDate-04c3b3da.js";import{j as I}from"./jsonApi-71500902.js";import{f as w}from"./formApi-e583adde.js";import{S as C,g as v}from"./util.grid-e8996db9.js";import{F as H}from"./FtpService-c7f28024.js";import{_ as U}from"./CommonCode.vue_vue_type_script_setup_true_lang-ab59297e.js";import{F as O}from"./FileListUploader-afa9b1dc.js";import{d as m}from"./util.date-5697c534.js";import"./index-8d9b3034.js";class B{async getFaqList(o){return(await I("/bo/cs/getFaqList",o||{})).data}async getFaq(o){return(await I("/bo/cs/getFaq",o||{})).data}async setFaqList(o){return(await I("/bo/cs/setFaqList",o||{})).data}async insertFaq(o){return(await w("/bo/cs/insertFaq",o)).data}async updateFaq(o){return(await w("/bo/cs/updateFaq",o)).data}async deleteFaq(o){return(await w("/bo/cs/getFaqList",o)).data}}const _=new B,K={id:"FaqDetail",class:"popup"},W={class:"popupWrap"},P=t("h3",null,"FAQ 등록/수정",-1),Q=t("span",{class:"icon"},"",-1),j=[Q],z={class:"popT"},X={key:0},J=t("th",{class:"th required"},"업체",-1),Z={class:"td"},tt=t("th",{class:"th"},"제목",-1),et={class:"td"},at=t("tr",null,[t("td",{colspan:"2",class:"td"},[t("div",{id:"faqEditor"})])],-1),dt=t("th",{class:"th"},"파일번호",-1),st={class:"td"},ot=t("th",{class:"th"},"우선순위",-1),nt={class:"td"},it=t("th",{class:"th"},"사용 여부",-1),lt={class:"td"},rt=t("th",{class:"th required"},"시작/종료일",-1),ut={class:"td"},pt={class:"btnWrap"},mt=$({__name:"FaqDetail",props:{data:{type:Object,required:!0}},emits:["set-close"],setup(q,{emit:o}){const e=q,n=M();e.data.strtDt||(e.data.strtDt=m.format(new Date,m.DATE_FORMAT)),e.data.endDt||(e.data.endDt=m.format(new Date,m.DATE_FORMAT)),e.data.useYn||(e.data.useYn="Y");const p=b({addFileList:[]}),g=b({editor:{},editorOption:{}}),r=()=>{e.data.faqNo?_.getFaq({faqNo:e.data.faqNo}).then(d=>{e.data.faqNo=d.data.faqNo,e.data.cnts=d.data.cnts,e.data.fileList=d.data.fileList,s()},d=>{console.log(d)}):s()},s=()=>{g.editor=v.createEditor({name:"#faqEditor",cnts:e.data.cnts})},i=()=>{let d=v.makeFileData({name:"faq",props:e,data:p});d.addCount>0||d.delCount>0?H.uploadList(d.form).then(a=>{if(a.success)e.data.fileNo=a.data.fileNo,k();else return!1},a=>(console.log(a),!1)):k()},k=()=>{let d=new FormData;d.append("faqNo",e.data.faqNo),d.append("cmpId",e.data.cmpId+""),d.append("tit",e.data.tit+""),d.append("cnts",g.editor.getMarkdown()),d.append("fileNo",e.data.fileNo),d.append("prir",e.data.prir),d.append("useYn",e.data.useYn+""),d.append("strtDt",e.data.strtDt+""),d.append("endDt",e.data.endDt+""),d.append("linkRef",e.data.linkRef+""),d.append("modId",e.data.modId+""),d.append("modDt",e.data.modDt+""),d.append("regId",e.data.regId+""),d.append("regDt",e.data.regDt+""),(e.data.mode==="insert"?_.insertFaq:_.updateFaq)(d).then(a=>{a.success?location.reload():console.log(a)},a=>{console.log(a)})};return N(()=>{r()}),(d,a)=>(f(),y("div",K,[t("div",W,[P,t("div",{class:"close",onClick:a[0]||(a[0]=l=>o("set-close"))},j),t("form",{onSubmit:a[10]||(a[10]=L(()=>{},["prevent"]))},[t("table",z,[h(n).userInfo.cmpId=="kaisa"?(f(),y("tr",X,[J,t("td",Z,[u(C,{cmpId:e.data.cmpId,required:!0,onSetCompany:a[1]||(a[1]=l=>{e.data.cmpId=l.cmpId})},null,8,["cmpId"])])])):F("",!0),t("tr",null,[tt,t("td",et,[c(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=l=>e.data.tit=l),maxlength:"200"},null,512),[[D,e.data.tit]])])]),at,t("tr",null,[dt,t("td",st,[u(O,{name:"Faq",fileList:e.data.fileList,addFileList:p.addFileList,onSetFileList:a[3]||(a[3]=l=>{e.data.fileList=l}),onSetAddFileList:a[4]||(a[4]=l=>{p.addFileList=l})},null,8,["fileList","addFileList"])])]),t("tr",null,[ot,t("td",nt,[c(t("input",{type:"number","onUpdate:modelValue":a[5]||(a[5]=l=>e.data.prir=l)},null,512),[[D,e.data.prir]])])]),t("tr",null,[it,t("td",lt,[u(U,{cd:"YN_CD",model:e.data.useYn,onSetData:a[6]||(a[6]=l=>{e.data.useYn=l})},null,8,["model"])])]),t("tr",null,[rt,t("td",ut,[u(S,{name:["strtDt"],format:h(m).DATE_FORMAT,date:[e.data.strtDt],isAll:!1,timer:!0,onSetStartDate:a[7]||(a[7]=l=>{e.data.strtDt=l.date})},null,8,["format","date"]),Y(" ~ "),u(S,{name:["endDt"],format:h(m).DATE_FORMAT,date:[e.data.endDt],isAll:!1,timer:!0,onSetStartDate:a[8]||(a[8]=l=>{e.data.endDt=l.date})},null,8,["format","date"])])])]),t("div",pt,[t("button",{type:"submit",onClick:i},"저장"),t("button",{type:"button",class:"gray",onClick:a[9]||(a[9]=l=>o("set-close"))},"취소")])],32)])]))}}),ct=["onSubmit","onKeyup"],ft=t("legend",null,"검색",-1),ht=t("colgroup",null,[t("col",{width:"80"}),t("col",{width:"30%"}),t("col",{width:"80"}),t("col",{width:"*"})],-1),Dt=t("th",null,"검색조건",-1),gt={colspan:"3"},_t={key:0},bt=t("th",null,"업체ID",-1),yt={colspan:"3"},qt={class:"audit"},It=t("th",null,"수정기간",-1),wt={colspan:"3"},Ft=t("th",null,"등록일",-1),St={colspan:"3"},vt=t("th",null,"수정ID",-1),kt=t("th",null,"등록ID",-1),$t={class:"btnWrap"},Mt=t("span",{class:"icon"},"",-1),Nt=t("button",{type:"submit",class:"button3"},[t("span",{class:"icon"},"")],-1),Lt=t("span",{class:"icon"},'"',-1),Yt=[Lt],Ct={class:"totalCount"},Tt=t("div",{id:"faqGrid"},null,-1),Kt=$({__name:"Faq",setup(q){const o=M(),e=b({keyword:"",startModDt:"",endModDt:"",regDt:"",regId:"",modId:"",cmpId:""}),n=b({faqGrid:{},required:["strtDt","endDt"],totalCount:0,list:[],audit:!1,detailShow:!1,detail:{faqNo:0,cmpId:"",tit:"",cnts:"",fileNo:0,prir:0,useYn:"Y",strtDt:"",endDt:"",linkRef:"",modId:"",modDt:"",regId:"",regDt:"",mode:""}}),p=()=>{_.getFaqList(e).then(r=>{n.totalCount=r.count?r.count:0,n.list=r.data,n.faqGrid.resetData(r.data,{})},r=>{console.log(r)})},g=()=>{n.detail={faqNo:0,cmpId:"",tit:"",cnts:"",fileNo:0,prir:0,useYn:"",strtDt:"",endDt:"",linkRef:"",modId:"",modDt:"",regId:"",regDt:"",mode:"insert"},n.detailShow=!0};return N(()=>{n.faqGrid=new V({el:document.getElementById("faqGrid"),columns:[{header:"FAQ 번호",name:"faqNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!1},editor:"text"},{header:"업체ID",name:"cmpId",sortable:!0,width:100,align:"left",disabled:!0,hidden:o.userInfo.cmpId!="kaisa",editor:"text"},{header:"제목",name:"tit",sortable:!0,width:100,align:"left",disabled:!0,validation:{dataType:"string",required:!0},editor:"text"},{header:"파일번호",name:"fileNo",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!0},editor:"text"},{header:"우선순위",name:"prir",sortable:!0,width:100,align:"right",disabled:!0,validation:{dataType:"number",required:!0},editor:"text"},{header:"사용 여부",name:"useYn",width:120,align:"left",sortable:!0,defaultValue:"Y",disabled:!0,validation:{dataType:"string",required:!0},formatter:"listItemText",editor:{type:"select",options:{listItems:o.codeList.YN_CD}}},{header:"시작일시",name:"strtDt",sortable:!0,width:120,align:"left",disabled:!0,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd HH:mm"}}},{header:"종료일시",name:"endDt",sortable:!0,width:120,align:"left",disabled:!0,validation:{dataType:"string",required:!1},editor:{type:"datePicker",options:{format:"yyyy-MM-dd HH:mm"}}},{header:"연동참조",name:"linkRef",align:"left",sortable:!0,width:110,disabled:!0,hidden:o.userInfo.cmpId!="kaisa"},{header:"수정 ID",name:"modId",align:"left",sortable:!0,width:110,disabled:!0},{header:"수정 일시",name:"modDt",align:"left",sortable:!0,width:120,disabled:!0},{header:"등록 ID",name:"regId",align:"left",sortable:!0,width:110,disabled:!0},{header:"등록 일시",name:"regDt",align:"left",sortable:!0,width:120,disabled:!0}],scrollX:!0,scrollY:!0,minBodyHeight:200,bodyHeight:468,columnOptions:{resizable:!0},minRowHeight:40,rowHeight:40,header:{height:40}}),n.faqGrid.on("dblclick",r=>{r.columnName&&n.list[r.rowKey]&&(n.detail=n.list[r.rowKey],n.detailShow=!0)}),p()}),(r,s)=>(f(),y(R,null,[t("form",{class:"search",onSubmit:L(p,["prevent"]),onKeyup:x(p,["enter"])},[t("fieldset",null,[ft,t("table",null,[ht,t("tbody",null,[t("tr",null,[Dt,t("td",gt,[c(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>e.keyword=i)},null,512),[[D,e.keyword]])])]),h(o).userInfo.cmpId=="kaisa"?(f(),y("tr",_t,[bt,t("td",yt,[u(C,{cmpId:e.cmpId,onSetCompany:s[1]||(s[1]=i=>{e.cmpId=i.cmpId})},null,8,["cmpId"])])])):F("",!0)]),c(t("tbody",qt,[t("tr",null,[It,t("td",wt,[u(G,{name:["startModDt","endModDt"],format:"YYYY-MM-DD",date:[e.startModDt,e.endModDt],onSetStartDate:s[2]||(s[2]=i=>{e.startModDt=i.date}),onSetEndDate:s[3]||(s[3]=i=>{e.endModDt=i.date})},null,8,["date"])])]),t("tr",null,[Ft,t("td",St,[u(S,{name:["regDt"],format:"YYYY-MM-DD",date:[e.regDt],onSetStartDate:s[4]||(s[4]=i=>{e.regDt=i.date})},null,8,["date"])])]),t("tr",null,[vt,t("td",null,[c(t("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=i=>e.modId=i)},null,512),[[D,e.modId]])]),kt,t("td",null,[c(t("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=i=>e.regId=i)},null,512),[[D,e.regId]])])])],512),[[T,n.audit]])])]),t("div",$t,[t("span",{class:"crud"},[t("button",{type:"button",class:"button add",onClick:g},[Mt,Y("등록")])]),t("button",{type:"button",class:"audit",onClick:s[7]||(s[7]=i=>n.audit=!n.audit)},"상세조회"),Nt,t("button",{type:"reset",onClick:s[8]||(s[8]=i=>h(v).reload())},Yt),t("div",Ct,"총 "+A(n.totalCount)+"건",1)])],40,ct),Tt,n.detailShow?(f(),E(mt,{key:0,data:n.detail,onSetClose:s[9]||(s[9]=i=>{n.detailShow=!1})},null,8,["data"])):F("",!0)],64))}});export{Kt as default};
